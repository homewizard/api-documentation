---
sidebar_position: 7
description: Error handling in the API
---

# Error handling

When you perform an invalid request or something went wrong, the API will respond with an error message. You have to check if the HTTP status code returns `200 OK` before parsing the result.
If you use an endpoint that returns JSON, you also will receive an object with some error information.

## Error codes

The predefined error codes are as follows:

| Code | Description                 |
| ---- | --------------------------- |
| 2    | BODY_CONTAINS_INVALID_JSON  |
| 7    | INVALID_VALUE_FOR_PARAMETER |
| 8    | PARAMETER_IS_NOT_MODIFIABLE |
| 201  | REQUEST_TO_LONG             |
| 202  | API_DISABLED                |
| 901  | INTERNAL_ERROR              |

## Examples

### API was disabled

```shell title="Request"
curl http://{IP address}/api/v1/data
```

```http title="Response"
HTTP/1.1 400 Bad Request
Content-Type: application/json
Content-Length: <length>

{
   "error": {
      "id": 202,
      "description": "API not enabled"
   }
}
```

### Invalid JSON

```shell title="Request"
curl http://{IP address}/api/v1/state HTTP/1.1 \
  -X PUT \
  -H "Content-Type: application/json" \
  -d '{"power_on": invalid_value}'
```

```http title="Response"
HTTP/1.1 400 Bad Request
Content-Type: application/json
Content-Length: <length>

{
   "error": {
      "id": 2,
      "description": "Body contains invalid json"
   }
}
```

### Invalid value

```shell title="Request"
curl http://{IP address}/api/v1/state HTTP/1.1 \
  -X PUT \
  -H "Content-Type: application/json" \
  -d '{"brightness": 500}'
```

```http title="Response"
HTTP/1.1 400 Bad Request
Content-Type: application/json
Content-Length: <length>

{
   "error": {
      "id": 7,
      "description": "brightness value limited to 0-255"
   }
}
```

### Turn off socket when switch-lock is enabled

```shell title="Request"
curl http://{IP address}/api/v1/state HTTP/1.1 \
  -X PUT \
  -H "Content-Type: application/json" \
  -d '{"power_on": false}'
```

```http title="Response"
HTTP/1.1 400 Bad Request
Content-Type: application/json
Content-Length: <length>

{
   "error": {
      "id": 8,
      "description": "power_on cannot be turned off when switch_lock is on"
   }
}
```
