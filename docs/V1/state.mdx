---
title: State
sidebar_position: 3
description: Control the state of the Energy Socket.
---

import Badge from '@site/src/components/Badge.js'

# Control socket state (`/api/v1/state`)

The `/api/v1/state` endpoint returns the actual state of the Energy Socket.

This endpoint accepts `GET` and `PUT` requests.

-   With `GET` you will receive the actual state
-   With `PUT` you can control the state.

<Badge color='hw-red'>✗ P1 Meter</Badge>
<Badge color='hw-green'>✓ Energy Socket</Badge>
<Badge color='hw-red'>✗ Energy Display</Badge>
<Badge color='hw-red'>✗ kWh Meter</Badge>
<Badge color='hw-red'>✗ Water Meter</Badge>
<Badge color='hw-red'>✗ Plug-in Battery</Badge>

## Parameters

| Data        | Type   | Description                                                                 |
| ----------- | ------ | --------------------------------------------------------------------------- |
| power_on    | bool   | The state of the switch. Returns `true` when the relay is in the 'on' state |
| switch_lock | bool   | When set to `true`, the socket cannot be turned off.                        |
| brightness  | number | Brightness of LED ring when socket is 'on'. Value from 0 (0%) to 255 (100%) |

## Examples

### Get actual state

This response tells that the socket is 'on', switch-lock is 'off' and the brightness of the LED ring is set to maximum.

```http title="Request"
curl http://<IP ADDRESS>/api/v1/state
```

```http title="Response"
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: <length>

{
   "power_on": true,
   "switch_lock": false,
   "brightness": 255
}
```

### Turn on socket

```http title="Request"
curl http://<IP ADDRESS>/api/v1/state \
   -X PUT \
   -H "Content-Type: application/json" \
   -d '{"power_on": true}'
```

```http title="Response"
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: <length>

{
   "power_on": true
}
```

### Turn on switch-lock

After enabling `switch_lock`, the socket is 'on' and cannot be turned off until `switch_lock` is disabled.

```http title="Request"
curl http://<IP ADDRESS>/api/v1/state \
   -X PUT \
   -H "Content-Type: application/json" \
   -d '{"switch_lock": true}'
```

```http title="Response"
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: <length>

{
   "switch_lock": true
}
```

### Set multiple parameters

You can configure multiple parameters at the same time. In this example.

-   Socket is turned off.
-   Switch-lock is turned off.
-   Brightness is set to 127 (50%).

The order of a combined request does not matter, if `switch-lock` was on, the socket will still turn off.
The complete state has to make sense; It is not possible to set `power_on` to false and `switch_lock` to true. See (see [Error handling](/docs/error-handling)) for more details.

```http title="Request"
curl http://<IP ADDRESS>/api/v1/state \
   -X PUT \
   -H "Content-Type: application/json" \
   -d '{"power_on": false, "switch_lock": false, "brightness": 127}'
```

```http title="Response"
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: <length>

{
      "switch_lock": false,
      "power_on": false,
      "brightness": 127
}
```
